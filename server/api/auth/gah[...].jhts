import { NuxtAuthHandler } from '#auth'
import AzureADProvider from 'next-auth/providers/azure-ad'

const config = useRuntimeConfig()

export default NuxtAuthHandler({
    providers: [
        // @ts-expect-error needed for .default to work during SSR
        AzureADProvider.default({
            clientId: config.azure.clientId,
            clientSecret: config.azure.clientSecret,
            tenantId: config.azure.tenantId,
            redirectUri: config.azure.redirectUri,
        })
    ]
})